<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: README.rdoc</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>README.rdoc</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>README.rdoc
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Thu Oct 14 00:40:36 +0200 2010</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1><a href="../classes/JBuilder.html">JBuilder</a> JSON Templating</h1>
<p>
<a href="../classes/JBuilder.html">JBuilder</a> is a simple templating
engine for generating JSON output. With Builder-like DSL it allows you to
have your controllers and models clean of view logic. Primarily for Rails,
but no reason not be used elsewhere. It was inspired by Builder gem and it
uses JSON gem in the background.
</p>
<h2>Motivation</h2>
<p>
A while ago I was implementing a REST API in Rails3 for my latest project
and I choose JSON for primary content type. After an easy start with Rails
and JSON based API, I found myself struggling to implement according to the
MVC pattern. It gets even more annoying, when your API is growing beyond
simplest example and when you want to have more control over the output
format and logic.
</p>
<p>
Rails usually tackles this challenge in one of three ways:
</p>
<ul>
<li>generating a simple JSON object in controller

</li>
<li>or keeping the controller clean, but putting the generating code into
model&#8216;s to_json method

</li>
<li>or having the view done in default ERB template

</li>
</ul>
<p>
First two approaches are strongly oppossing MVC pattern, having the view
logic in either controller or model. Third is just too cumbersome, since
ERB was meant for generating XML/HTML - and even there it doesn&#8216;t
exactly shine. (If you disagree, check HAML ;)
</p>
<p>
What I was really missing was a simple templating for generating JSON
output, something like Builder is for XML. If you ask me, this should come
with Rails out of the box along with ERB and Builder.
</p>
<p>
Here is the solution - a Builder-like JSON templating.
</p>
<h2>Examples and Usage</h2>
<p>
Let&#8216;s say you want to produce output like this:
</p>
<pre>
  {
    &quot;user&quot;:
    {
      &quot;id&quot;:13,
      &quot;nickname&quot;:&quot;antiveb&quot;,
      &quot;email&quot;:&quot;jurglic@antiveb.com&quot;,
      &quot;twitter_data&quot;:
      {
        &quot;key&quot;:&quot;7325872&quot;,
        &quot;token&quot;:&quot;0&quot;,
        &quot;secret&quot;:&quot;0&quot;,
        &quot;friends&quot;:
        [
          10,
          20,
          30
        ]
      }
    }
  }
</pre>
<p>
Your code would then look like this:
</p>
<pre>
  json.user do
    json.value :id, 13
    json.nickname &quot;antiveb&quot;
    json.email    &quot;jurglic@antiveb.com&quot;
    json.twitter_data do
      json.key     &quot;7325872&quot;
      json.token   &quot;0&quot;
      json.secret  &quot;0&quot;
      json.friends [10, 20, 30]
    end
  end
</pre>
<h2>Setup</h2>
<p>
Just install the gem and require it in your Gemfile: gem
&quot;jbuilder&quot;, :git =&gt;
&quot;git://github.com/antiveb/JBuilder.git&quot;
</p>
<h2>Improving the docs</h2>
<p>
If you find something confusing or encounter a problem with this
instructions please fork this project, make the changes, and send me a pull
request.
</p>
<h2>Contact</h2>
<pre>
  Author:    Uros Jurglic
  Company:   Antiveb ltd.
  Email:     jurglic@antiveb.com
  Home Page: www.antiveb.com
  License:   MIT Licence (www.opensource.org/licenses/mit-license.html)
</pre>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>