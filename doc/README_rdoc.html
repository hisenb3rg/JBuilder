<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>File: README.rdoc [Jbuilder]</title>

	<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>
</head>

<body class="file">
	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="./README_rdoc.html">README.rdoc</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./JBuilder.html">JBuilder</a></li>
				
					<li><a href="./JBuilder/JBuilderDsl.html">JBuilder::JBuilderDsl</a></li>
				
					<li><a href="./JBuilder/JBuilderHandler.html">JBuilder::JBuilderHandler</a></li>
				
					<li><a href="./JBuilder/Railtie.html">JBuilder::Railtie</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1><a href="JBuilder.html">JBuilder</a> JSON Templating</h1>
<p>
<a href="JBuilder.html">JBuilder</a> is a simple templating engine for
generating JSON output. With Builder-like DSL it allows you to have your
controllers and models clean of view logic. Primarily for Rails, but no
reason not be used elsewhere. It was inspired by Builder gem and it uses
JSON gem in the background.
</p>
<h2>Motivation</h2>
<p>
A while ago I was implementing a REST API in Rails3 for my latest project
and I choose JSON for primary content type. After an easy start with Rails
and JSON based API, I found myself struggling to implement according to the
MVC pattern. It gets even more annoying, when your API is growing beyond
simplest example and when you want to have more control over the output
format and logic.
</p>
<p>
Rails usually tackles this challenge in one of three ways:
</p>
<ul>
<li><p>
generating a simple JSON object in controller
</p>
</li>
<li><p>
or keeping the controller clean, but putting the generating code into
model&#8217;s to_json method
</p>
</li>
<li><p>
or having the view done in default ERB template
</p>
</li>
</ul>
<p>
First two approaches are strongly oppossing MVC pattern, having the view
logic in either controller or model. Third is just too cumbersome, since
ERB was meant for generating XML/HTML - and even there it doesn&#8217;t
exactly shine. (If you disagree, check HAML ;)
</p>
<p>
What I was really missing was a simple templating for generating JSON
output, something like Builder is for XML. If you ask me, this should come
with Rails out of the box along with ERB and Builder.
</p>
<p>
Here is the solution - a Builder-like JSON templating.
</p>
<h2>Examples and Usage</h2>
<p>
Let&#8217;s say you want to produce output like this:
</p>
<pre>
  {
    &quot;user&quot;:
    {
      &quot;id&quot;:13,
      &quot;nickname&quot;:&quot;antiveb&quot;,
      &quot;email&quot;:&quot;jurglic@antiveb.com&quot;,
      &quot;twitter_data&quot;:
      {
        &quot;key&quot;:&quot;7325872&quot;,
        &quot;token&quot;:&quot;0&quot;,
        &quot;secret&quot;:&quot;0&quot;,
        &quot;friends&quot;: [ 10, 20, 30 ],
        &quot;followers&quot;: [ 20, 30 ]
      }
    }
  }
  
</pre>
<p>
Your code would then look like this:
</p>
<pre>
  json.user do
    json.value :id, 13
    json.nickname   &quot;antiveb&quot;
    json.email      &quot;jurglic@antiveb.com&quot;
    json.twitter_data do
      json.key     &quot;7325872&quot;
      json.token   &quot;0&quot;
      json.secret  &quot;0&quot;
      json.friends [10, 20, 30]
      json.followers :array do
        json.element 20
        json.element 30
      end
    end
  end
</pre>
<p>
Some rules, how to write directives:
</p>
<ul>
<li><p>
every directive is prefixed with json.
</p>
</li>
<li><p>
there are three directive types (methods), that can be directly invoked:
value, array, object
</p>
</li>
<li><p>
all three directive types take 2 parameters: name and value
</p>
</li>
<li><p>
if the directive is not one of those mentioned, there is a shorthand
directive that tries to guess the directive type from arguments
</p>
</li>
<li><p>
shorthand directive takes the directive name as the first argument and
value as the second argument
</p>
</li>
</ul>
<h2>Setup</h2>
<p>
Just install the gem and require it in your Gemfile: gem
&#8220;jbuilder&#8221;, :git =>
&#8220;git://github.com/antiveb/JBuilder.git&#8220;
</p>
<h2>Improving the docs</h2>
<p>
If you find something confusing or encounter a problem with this
instructions please fork this project, make the changes, and send me a pull
request.
</p>
<h2>Contact</h2>
<pre>
  Author:    Uros Jurglic
  Company:   Antiveb ltd.
  Email:     jurglic@antiveb.com
  Home Page: www.antiveb.com
  License:   MIT Licence (www.opensource.org/licenses/mit-license.html)</pre>

	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>
</body>
</html>

